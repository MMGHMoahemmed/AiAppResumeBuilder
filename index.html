<!DOCTYPE html>
<!-- Set lang and dir dynamically with JS -->
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- UPDATE Title translation key -->
    <title data-translate="app_main_title">AI Application & Resume Builder</title>


    <!-- The dexie Js -->
    <script src="./sources/dexie.js" defer></script>

    <!-- The Config File -->
    <script src="/js/config.js" defer></script>
    <!-- The Translation File -->
    <script src="/js/translation.js" defer></script>
     <!-- Load dexieAPI file -->
     <script src="/js/dexieApi.js" defer></script>
    <!-- The AiAPI File -->
    <script src="/js/aiAPI.js" defer></script>
    <!-- The Theme and Langauge Switching File -->
    <script src="/js/themeAndLanguage.js" defer></script>


    <script src="./sources/tabler.min.js" defer></script>
    <link rel="stylesheet" href="./sources/tabler.min.css">
    <link rel="stylesheet" href="./sources/tabler-icons.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="Gemini.css">




     <!-- Load MainJs -->
     <script src="/js/main.js" defer></script>



</head>
<body data-bs-theme="light">
    <div class="page">

        <!-- Navbar -->
        <header class="navbar navbar-expand-md navbar-light d-print-none ">
          <div class="container-xl">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu">
                  <span class="navbar-toggler-icon"></span>
              </button>


            <!-- BEGIN NAVBAR LOGO -->
            <div class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
              <a href="./">
                               <!-- Placeholder Logo -->
                               <img class="navbar-brand-image" width="40%" height="40%" src="./img/logo.png"></img>
                              </a>
            </div>
            <!-- END NAVBAR LOGO -->


              <div class="collapse navbar-collapse" id="navbar-menu">
                  <div class="d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center">
                    <!-- BEGIN NAVBAR MENU -->
                    <ul class="navbar-nav">
                      <li class="nav-item active">
                        <a class="nav-link" href="./">
                          <span class="nav-link-icon d-md-none d-lg-inline-block">
                            <!-- Download SVG icon from http://tabler.io/icons/icon/home -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                              <path d="M5 12l-2 0l9 -9l9 9l-2 0"></path>
                              <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
                              <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
                            </svg>
                          </span>
                          <span class="nav-link-title" data-translate="menu_home"> Home </span>
                        </a>
                      </li>
                      <li class="nav-item">
                          <a class="nav-link" href="/MyApplications.html">
                            <span class="nav-link-icon d-md-none d-lg-inline-block">
                              <!-- Download SVG icon from http://tabler.io/icons/icon/checkbox -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-text" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><line x1="9" y1="9" x2="10" y2="9" /><line x1="9" y1="13" x2="15" y2="13" /><line x1="9" y1="17" x2="15" y2="17" /></svg>
                            </span>
                            <!-- Update Key -->
                            <span class="nav-link-title" data-translate="menu_myapplications"> My Applications </span>
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="./ResumeBuilder.html">
                            <span class="nav-link-icon d-md-none d-lg-inline-block">
                              <!-- Download SVG icon from http://tabler.io/icons/icon/checkbox -->
                              <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-text-ai"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M10 21h-3a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v3.5" /><path d="M9 9h1" /><path d="M9 13h2.5" /><path d="M9 17h1" /><path d="M14 21v-4a2 2 0 1 1 4 0v4" /><path d="M14 19h4" /><path d="M21 15v6" /></svg>
                            </span>
                            <span class="nav-link-title" data-translate="menu_Ai_Builder"> Ai Resume Builder </span>
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="./AiCoverLetter.html">
                            <span class="nav-link-icon d-md-none d-lg-inline-block">
                              <!-- Download SVG icon from http://tabler.io/icons/icon/checkbox -->
                              <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-script"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 20h-11a3 3 0 0 1 0 -6h11a3 3 0 0 0 0 6h1a3 3 0 0 0 3 -3v-11a2 2 0 0 0 -2 -2h-10a2 2 0 0 0 -2 2v8" /></svg>
                            </span>
                            <span class="nav-link-title" data-translate="menu_cover_letter"> Ai Cover Letter </span>
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="./AiJobTrainer.html">
                            <span class="nav-link-icon d-md-none d-lg-inline-block">
                              <!-- Download SVG icon from http://tabler.io/icons/icon/checkbox -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                          <path d="M9 11l3 3l8 -8"></path>
                          <path d="M20 12v6a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h9"></path></svg>
                            </span>
                            <span class="nav-link-title" data-translate="menu_parser"> Ai Job Trainer </span>
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="/Settings.html">
                            <span class="nav-link-icon d-md-none d-lg-inline-block">
                              <!-- Download SVG icon from http://tabler.io/icons/icon/checkbox -->
                              <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
                            </span>
                            <span class="nav-link-title" data-translate="menu_settings"> Settings </span>
                          </a>
                        </li>
                    </ul>
                    <!-- END NAVBAR MENU -->
                  </div>



              <div class="navbar-nav flex-row order-md-last">
                  <div class="nav-item">
                      <a  id="dark_mode" class="nav-link px-0 hide-theme-dark" data-bs-toggle="tooltip" data-bs-placement="bottom" aria-label="Enable dark mode" data-bs-original-title="Enable dark mode">
                        <!-- Download SVG icon from http://tabler.io/icons/icon/moon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                          <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                        </svg>
                      </a>
                      <a id="light_mode" class="nav-link px-0 hide-theme-light" data-bs-toggle="tooltip" data-bs-placement="bottom" aria-label="Enable light mode" data-bs-original-title="Enable light mode">
                        <!-- Download SVG icon from http://tabler.io/icons/icon/sun -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                          <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path>
                          <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                        </svg>
                      </a>
                    </div>

                  <!-- Add other navbar items like User profile if needed -->
                  <div class="nav-item dropdown">
                      <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown" aria-label="Open language menu">
                         <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7" /><path d="M9 3v2c0 4.418 -2.239 8 -5 8" /><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" /><path d="M12 20l4 -9l4 9" /><path d="M19.1 18h-6.2" /></svg>
                      </a>
                      <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                        <a href="#" class="dropdown-item lang-switch" data-lang="en">English</a>
                        <a href="#" class="dropdown-item lang-switch" data-lang="ar">العربية (Arabic)</a>
                      </div>
                    </div>
              </div>


              <div class="collapse navbar-collapse" id="navbar-menu">
                  <!-- Optional Navbar Links -->
              </div>


          </div>
      </header>



        <!-- Page Body -->
        <div class="page-wrapper">

            <div class="page-body">

                <header class="hero pb-0">
                    <div class="container">

                      <!-- UPDATE Headline and Paragraph -->
                      <h1 class="hero-title" data-translate="home_headline_title_new" >Build Smarter Applications with AI: Resume, Cover Letter & Job Training</h1>
                      <p class="hero-description mt-4" data-translate="home_headline_paragraph_new" >
                        Manage your job search effectively with our integrated suite. Craft AI-powered resumes and cover letters tailored to job descriptions, practice interview questions with the AI Job Trainer, and keep all your application materials organized locally in your browser. No accounts needed.
                      </p>
                      <br><br><br><br>
                      <div class="my-5">
                        <div class="row g-3 justify-content-center">
                          <div class="col-auto">
                              <!-- UPDATE Link and Key -->
                            <a href="MyApplications.html" class="btn btn-lg" data-translate="button_see_applications" >See Applications</a>
                          </div>
                          <div class="col-auto">
                            <!-- CHANGE href, REMOVE modal attributes -->
                            <a href="MyApplications.html#create" class="btn btn-lg btn-primary" data-translate="button_create_new_application" >Create New Application +</a>
                            <!-- Add #create hash to potentially auto-open modal on MyApplications page load (optional enhancement) -->
                          </div>
                        </div>
                      </div>
                    <br>
                    <br>
                    <br>
                    <br>
                    </div>
                  </header>


                <section class="section">
            <div class="container">
              <div class="row items-center text-center g-lg-10">
                  <!-- UPDATE Feature 1: Application Management -->
                <div class="col-md-6 col-lg">
                  <div class="shape shape-md mb-3">
                    <!-- Icon suggestion: Briefcase or Folder -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-briefcase" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2" /><path d="M12 12l0 .01" /><path d="M3 13a20 20 0 0 0 18 0" /></svg>
                  </div>
                  <h2 class="h2" data-translate="home_feature_app_management_title" >Integrated Application Hub</h2>
                  <p class="text-muted" data-translate="home_feature_app_management_para" >Organize your job hunt. Store resumes, cover letters, and job descriptions together for each application, making tracking and tailoring easy.</p>
                </div>
                  <!-- UPDATE Feature 2: AI Assistance -->
                <div class="col-md-6 col-lg">
                  <div class="shape shape-md mb-3">
                    <!-- Icon suggestion: Sparkles or Robot -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sparkles" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z" /></svg>
                  </div>
                  <h2 class="h2" data-translate="home_feature_ai_assistance_title" >Smart AI Content Generation</h2>
                  <p class="text-muted" data-translate="home_feature_ai_assistance_para" >
                    Leverage AI to write compelling resume summaries, generate targeted cover letters based on job descriptions, and enhance your existing drafts.
                  </p>
                </div>
                 <!-- UPDATE Feature 3: AI Job Trainer -->
                <div class="col-md-6 col-lg">
                  <div class="shape shape-md mb-3">
                     <!-- Icon suggestion: Message Chatbot or School/Graduation Cap -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-message-chatbot" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 21v-13a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-9l-4 4" /><path d="M9.5 9a.5 .5 0 1 0 0 -1a.5 .5 0 0 0 0 1z" /><path d="M14.5 9a.5 .5 0 1 0 0 -1a.5 .5 0 0 0 0 1z" /><path d="M9.5 13a2.5 2.5 0 0 0 5 0" /></svg>
                  </div>
                  <h2 class="h2" data-translate="home_feature_ai_trainer_title" >AI-Powered Job Trainer</h2>
                  <p class="text-muted" data-translate="home_feature_ai_trainer_para" >Prepare effectively for interviews and tests. Get AI-generated practice questions (written & interview) tailored to specific job descriptions, complete with sample answers.</p>
                </div>
              </div>
            </div>
                 </section>
             </div>
         </div>







    </div>


    <!-- Custom JS -->
    <script src="Gemini.js"></script>

   
    <!-- Add JS to handle the modal creation logic from index.html -->
     <script>
         document.addEventListener('DOMContentLoaded', () => {
             const createModalEl = document.getElementById('modal-create-application');
             const createBtn = document.getElementById('modal-create-save-btn');
             const nameInput = document.getElementById('new-application-name');
             const jobDescInput = document.getElementById('new-application-jobdesc'); // Added
             const errorEl = document.getElementById('modal-create-error');
             let modalInstance = null;

             if (createModalEl) {
                 modalInstance = new bootstrap.Modal(createModalEl);

                 createBtn?.addEventListener('click', async () => {
                     const name = nameInput.value.trim();
                     const jobDesc = jobDescInput.value.trim(); // Added
                     if (!name) {
                         errorEl.textContent = translations[currentLang]?.myapplications_modal_error_name || "Please enter an application name.";
                         errorEl.style.display = 'block';
                         return;
                     }
                     errorEl.style.display = 'none';
                     createBtn.disabled = true;
                     createBtn.innerHTML = `<span class="spinner-border spinner-border-sm"></span> Creating...`;

                     const now = new Date();
                     const newAppData = {
                         name: name,
                         jobDescription: jobDesc, // Added
                         companyName: '',
                         hiringManager: '',
                         resumeData: { personalInfo: { name: name }, settings: {} /* initialize other sections */ },
                         coverLetterData: { content: '' },
                         aiTrainerData: { behavioral: [], technical: [], situational: [] },
                         createdAt: now,
                         updatedAt: now
                     };

                     try {
                         // Ensure Dexie and saveApplication are available
                         if (typeof saveApplication === 'function') {
                             const newId = await saveApplication(newAppData);
                             if (newId) {
                                 if (typeof showNotification === 'function') showNotification(translations[currentLang]?.myapplications_notify_create_success || "Application created!", 'success');
                                 modalInstance.hide();
                                 window.location.href = `./ResumeBuilder.html?applicationId=${newId}`;
                             } else { throw new Error("Save failed"); }
                         } else { throw new Error("saveApplication function not found"); }
                     } catch (err) {
                         console.error("Modal creation error:", err);
                         errorEl.textContent = translations[currentLang]?.myapplications_modal_error_save || "Error saving application.";
                         errorEl.style.display = 'block';
                         createBtn.disabled = false;
                         createBtn.innerHTML = translations[currentLang]?.myapplications_modal_button_create || 'Create Application';
                     }
                 });

                 createModalEl.addEventListener('hidden.bs.modal', () => {
                     nameInput.value = ''; // Clear fields on close
                     jobDescInput.value = ''; // Added
                     errorEl.style.display = 'none';
                     createBtn.disabled = false;
                     createBtn.innerHTML = translations[currentLang]?.myapplications_modal_button_create || 'Create Application';
                 });
             }
         });
     </script>

</body>
</html>
